# تعديل تكلفة الإنترنت للجلسات الاشتراكية - branchHUB Dashboard

## نظرة عامة

تم إضافة ميزة تعديل تكلفة الإنترنت للجلسات الاشتراكية، مما يتيح تحديد تكلفة ثابتة للإنترنت طوال فترة الاشتراك.

## الميزة الجديدة

### تعديل تكلفة الإنترنت للجلسات الاشتراكية

#### الوظائف المضافة:
- **زر تعديل التكلفة**: يظهر للجلسات الاشتراكية في صفحة التفاصيل
- **تكلفة ثابتة**: إمكانية تحديد تكلفة ثابتة للإنترنت طوال فترة الاشتراك
- **تكلفة مجانية**: إمكانية جعل الإنترنت مجانياً للاشتراك
- **واجهة مخصصة**: نافذة منبثقة مخصصة للجلسات الاشتراكية

#### كيفية الاستخدام:
1. انتقل إلى صفحة تفاصيل الجلسة الاشتراكية
2. ستجد زر "تعديل التكلفة" في قسم تكلفة الإنترنت
3. اضغط على الزر لفتح النافذة المنبثقة
4. أدخل التكلفة المطلوبة أو اترك الحقل فارغاً لجعل الإنترنت مجانياً
5. اضغط "حفظ التغييرات"

## التحسينات في الواجهة

### 1. صفحة تفاصيل الجلسة
- **قسم تكلفة الإنترنت للاشتراكات**: قسم منفصل لعرض تكلفة الإنترنت للجلسات الاشتراكية
- **عرض التكلفة الحالية**: عرض التكلفة المخصصة أو "مجانية"
- **زر التعديل**: زر واضح لتعديل التكلفة
- **نص توضيحي**: شرح أن التكلفة ستكون ثابتة طوال فترة الاشتراك

### 2. النافذة المنبثقة
- **عنوان مخصص**: "تعديل تكلفة الإنترنت - جلسة اشتراكية"
- **معلومات مفصلة**: عرض معلومات الجلسة الاشتراكية
- **نص توضيحي**: شرح كيفية استخدام الميزة
- **قيمة افتراضية**: حقل فارغ للإنترنت المجاني

## الوظائف التقنية

### النافذة المنبثقة المحدثة:
```php
// عنوان النافذة
@if($session->isSubscription())
    تعديل تكلفة الإنترنت - جلسة اشتراكية
@else
    تعديل تكلفة الإنترنت
@endif

// النص التوضيحي
@if($session->isSubscription())
    اترك الحقل فارغاً لجعل الإنترنت مجانياً، أو أدخل مبلغاً ثابتاً للإنترنت طوال فترة الاشتراك
@else
    اترك الحقل فارغاً لاستخدام الحساب التلقائي
@endif
```

### معلومات الجلسة الاشتراكية:
```php
// معلومات إضافية في النافذة
@if($session->isSubscription())
    <li>نوع الجلسة: <span class="badge bg-success">اشتراك</span></li>
    <li>التكلفة الافتراضية: مجانية (30 يوم)</li>
    <li>المدة الحالية: {{ $session->formatDuration() }}</li>
    <li class="text-primary"><strong>ملاحظة:</strong> التكلفة المخصصة ستكون ثابتة طوال فترة الاشتراك</li>
@endif
```

### رسائل النجاح المحدثة:
```php
// رسالة نجاح مخصصة للجلسات الاشتراكية
if ($session->isSubscription()) {
    if ($customCost === null) {
        $message .= ' - الإنترنت مجاني للاشتراك';
    } else {
        $message .= ' - تكلفة ثابتة: $' . number_format($newCost, 2) . ' طوال فترة الاشتراك';
    }
}
```

## عرض التكلفة

### للجلسات الاشتراكية:
- **تكلفة مخصصة**: عرض المبلغ مع شارة "مخصصة"
- **تكلفة مجانية**: عرض "مجانية (اشتراك)" مع شارة "مجانية"
- **الجلسات المنتهية**: عرض التكلفة النهائية

### مثال على العرض:
```
تكلفة الإنترنت: $25.00 [مخصصة]
أو
تكلفة الإنترنت: مجانية (اشتراك) [مجانية]
```

## الميزات الأمنية

### التحقق من صحة البيانات:
- التحقق من أن القيمة رقمية
- التحقق من أن القيمة أكبر من أو تساوي صفر
- السماح بقيم فارغة للإنترنت المجاني

### تسجيل العمليات:
- تسجيل جميع عمليات تعديل التكلفة
- حفظ القيم القديمة والجديدة
- تسجيل نوع الجلسة في السجلات

## الاستخدام الأمثل

### للجلسات الاشتراكية الجديدة:
1. إنشاء جلسة اشتراكية
2. تحديد تكلفة الإنترنت المطلوبة (اختياري)
3. مراقبة التكلفة من صفحة التفاصيل

### للجلسات الاشتراكية الحالية:
1. مراجعة التكلفة الحالية
2. تعديل التكلفة حسب الحاجة
3. التأكد من حفظ التغييرات

## الدعم والمساعدة

### في حالة المشاكل:
1. تحقق من أن الجلسة من نوع اشتراك
2. تأكد من صحة القيمة المدخلة
3. راجع سجلات التدقيق للتغييرات

### للمطورين:
- جميع الدوال تدعم الجلسات الاشتراكية
- يمكن تخصيص رسائل النجاح
- النظام قابل للتوسع

## الخلاصة

تم إضافة ميزة شاملة لتعديل تكلفة الإنترنت للجلسات الاشتراكية تتيح:
- تحديد تكلفة ثابتة للإنترنت
- جعل الإنترنت مجانياً
- واجهة مستخدم مخصصة
- رسائل واضحة ومفيدة
- تسجيل كامل للعمليات

هذه الميزة تجعل إدارة تكلفة الإنترنت للاشتراكات أكثر مرونة ووضوحاً. 